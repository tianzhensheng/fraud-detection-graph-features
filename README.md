# fraud-detection-graph-features

> **æ— æ·±åº¦å­¦ä¹  Â· çº¯å›¾ç‰¹å¾å·¥ç¨‹ Â· å¯è§£é‡Š Â· å¯è½åœ°**

æœ¬é¡¹ç›®é€šè¿‡æ„å»ºäº¤æ˜“è´¦æˆ·å…³ç³»å›¾ï¼Œæå–å®ä½“çº§è¡Œä¸ºç‰¹å¾ï¼Œæ˜¾è‘—æå‡é‡‘èæ¬ºè¯ˆè¯†åˆ«èƒ½åŠ›ã€‚ä»£ç åŸºäº **PySpark** å®ç°ï¼Œé€‚ç”¨äºäº¿çº§äº¤æ˜“åœºæ™¯ï¼Œç¬¦åˆå·¥ä¸šç•Œä¸»æµé£æ§å®è·µã€‚

## ğŸ“Œ é¡¹ç›®äº®ç‚¹

- **çœŸå®é£æ§é€»è¾‘**ï¼šä»¥å‘èµ·æ–¹è´¦æˆ·ï¼ˆ`nameOrig`ï¼‰ä¸ºé£é™©å®ä½“ï¼Œæ¨¡æ‹Ÿé»‘äº§å›¢ä¼™å…±ç”¨è´¦æˆ·çš„è¡Œä¸ºæ¨¡å¼ã€‚
- **æ ¸å¿ƒå›¾ç‰¹å¾**ï¼š
  - å®ä½“å†å²æ¬ºè¯ˆç‡ï¼ˆ`entity_fraud_rate`ï¼‰
  - å®ä½“æ€»äº¤æ˜“æ¬¡æ•°ï¼ˆ`entity_tx_count`ï¼‰
  - å®ä½“å¹³å‡äº¤æ˜“é‡‘é¢ï¼ˆ`entity_mean_amt`ï¼‰
- **å¯è§£é‡Šæ¨¡å‹**ï¼šä½¿ç”¨ Random Forestï¼Œé¿å…é»‘ç›’ï¼Œä¾¿äºä¸šåŠ¡å›æº¯ä¸è§„åˆ™æç‚¼ã€‚
- **åˆ†å¸ƒå¼æ¶æ„**ï¼šåŸºäº PySparkï¼Œæ”¯æŒæ¨ªå‘æ‰©å±•è‡³ TB çº§æ•°æ®ã€‚
- **æ•ˆæœæ˜¾è‘—**ï¼šåœ¨åˆæˆæ•°æ®é›†ä¸Šï¼Œå›¾ç‰¹å¾ä½¿ AUC æå‡ **+0.05~0.10**ã€‚

## ğŸ“Š æ•°æ®é›†

- **åç§°**ï¼šSynthetic Financial Dataset for Fraud Detection (PaySim)
- **æ¥æº**ï¼š[Kaggle - ealaxi/paysim1](https://www.kaggle.com/datasets/ealaxi/paysim1)
- **è®¸å¯**ï¼šCC BY-SA 4.0
- **è§„æ¨¡**ï¼š6,362,620 æ¡äº¤æ˜“è®°å½•ï¼Œæ¬ºè¯ˆç‡ â‰ˆ 0.13%
- **å…³é”®å­—æ®µ**ï¼š
  - `nameOrig`: å‘èµ·æ–¹è´¦æˆ·ï¼ˆé£é™©ä¸»ä½“ï¼‰
  - `amount`: äº¤æ˜“é‡‘é¢
  - `isFraud`: æ¬ºè¯ˆæ ‡ç­¾ï¼ˆ0/1ï¼‰

> ğŸ’¡ **æ³¨**ï¼šå› æ•°æ®é›†è¾ƒå¤§ï¼ˆ~1.3GBï¼‰ï¼Œæœ¬ä»“åº“ä¸åŒ…å«åŸå§‹æ•°æ®ã€‚è¯·ä» Kaggle ä¸‹è½½åæ”¾å…¥ `data/` ç›®å½•ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ ¸å¿ƒæ¡†æ¶**ï¼šApache Spark (PySpark)
- **æœºå™¨å­¦ä¹ **ï¼šSpark MLlib (`RandomForestClassifier`)
- **ç‰¹å¾å·¥ç¨‹**ï¼šSpark SQL çª—å£å‡½æ•°ï¼ˆ`avg() over partition by`ï¼‰
- **è¯„ä¼°æŒ‡æ ‡**ï¼šAUC-ROC

## â–¶ï¸ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–


### 2. å‡†å¤‡æ•°æ®
- ä» [Kaggle](https://www.kaggle.com/datasets/ealaxi/paysim1) ä¸‹è½½  
  `PS_20174392719_1491204439457_log.csv`
- å°†æ–‡ä»¶æ”¾å…¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `data/` æ–‡ä»¶å¤¹ï¼š
  
